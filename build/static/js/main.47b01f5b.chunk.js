(this["webpackJsonpreact-pomodoro"]=this["webpackJsonpreact-pomodoro"]||[]).push([[0],{142:function(e,t,n){e.exports=n(246)},147:function(e,t,n){},148:function(e,t,n){},166:function(e,t,n){},167:function(e,t,n){},215:function(e,t,n){},216:function(e,t,n){},217:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){},222:function(e,t,n){},223:function(e,t,n){},224:function(e,t,n){},225:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},243:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(5),c=n.n(o),s=(n(147),n(11)),i=n(12),u=n(14),l=n(15),d=(n(148),n(46)),p=n(25),m="";m="/tomato-todo";var f=Object(p.a)({basename:m}),h=n(20),y=n(16),v=n.n(y),b=n(21),E=n(248),T=n(10),O=n(252),g=n(130),j=n.n(g).a.create({baseURL:"https://gp-server.hunger-valley.com/",headers:{"t-app-id":"N3y3yFNjWuHk6NRX3N1CYmBc","t-app-secret":"EuoKSFs7eNmxKDjmpuqGymWp"}});j.interceptors.request.use((function(e){var t=localStorage.getItem("x-token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return console.error(e),Promise.reject(e)})),j.interceptors.response.use((function(e){return e.headers["x-token"]&&localStorage.setItem("x-token",e.headers["x-token"]),e}),(function(e){var t;return 401===(null===(t=e.response)||void 0===t?void 0:t.status)&&f.push("/login"),Promise.reject(e)}));var k,w=j,D=(n(166),n(167),n(250)),N=n(19),C=function(e){return{type:"UPDATE_TODO",payload:e}},x=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onKeyUp=function(e){13===e.keyCode&&""!==a.state.description&&a.addTodo()},a.addTodo=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.post("todos",{description:a.state.description});case 3:t=e.sent,a.props.addTodo(t.data.resource),a.setState({description:""}),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.state={description:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state.description,n=t?a.createElement(T.a,{type:"enter",onClick:this.addTodo}):a.createElement("span",null);return a.createElement("div",{className:"TodoInput",id:"TodoInput"},a.createElement(D.a,{placeholder:"\u6dfb\u52a0\u65b0\u4efb\u52a1",suffix:n,value:t,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:this.onKeyUp}))}}]),n}(a.Component),M={addTodo:function(e){return{type:"ADD_TODO",payload:e}}},_=Object(N.b)((function(e,t){return Object(h.a)({},t)}),M)(x),A=n(253),F=(n(215),n(2)),H=n.n(F),I=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateTodo=function(){var e=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.completed&&(t.completed_at=new Date),e.prev=1,e.next=4,w.put("todos/".concat(a.props.id),t);case 4:n=e.sent,a.props.updateTodo(n.data.resource),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),a.editTodo=function(){a.props.editTodo(a.props.id)},a.handleKeyUp=function(e){13===e.keyCode&&""!==a.state.editText&&a.updateTodo({description:a.state.editText})},a.state={editText:a.props.description},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.completed,r=t.description,o=t.editing,c=a.createElement("div",{className:"editing"},a.createElement(D.a,{type:"text",value:this.state.editText,onChange:function(t){return e.setState({editText:t.target.value})},onKeyUp:this.handleKeyUp}),a.createElement("div",{className:"iconWrapper"},a.createElement(T.a,{type:"enter",onClick:function(){return e.updateTodo({description:e.state.editText})}}),a.createElement(T.a,{type:"delete",theme:"filled",onClick:function(){return e.updateTodo({deleted:!0})}}))),s=a.createElement("span",{className:"text",onDoubleClick:this.editTodo},r),i=H()({TodoItem:!0,editing:o,completed:n});return a.createElement("div",{className:i,id:"TodoItem"},a.createElement(A.a,{checked:!!n,onChange:function(t){return e.updateTodo({completed:t.target.checked})}}),o?c:s)}}]),n}(a.Component),S={editTodo:function(e){return{type:"EDIT_TODO",payload:e}},updateTodo:C},U=Object(N.b)((function(e,t){return Object(h.a)({},t)}),S)(I),z=n(63),B=n(247),P=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Todos",id:"Todos"},a.createElement(_,null),a.createElement("div",{className:"todoLists"},this.unCompletedTodos.map((function(e){return a.createElement(U,Object.assign({key:e.id},e))})),this.unCompletedTodos.length<1&&this.CompletedTodos.length<1?a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}):"\u6700\u8fd1\u5df2\u5b8c\u6210\uff1a",this.CompletedTodos.map((function(e){return a.createElement(U,Object.assign({key:e.id},e))}))))}},{key:"CompletedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return e.completed&&Date.parse(e.completed_at)>Date.parse(Object(B.a)(new Date,"yyyy-MM-dd"))}))}},{key:"unCompletedTodos",get:function(){return this.unDeletedTodos.filter((function(e){return!e.completed}))}},{key:"unDeletedTodos",get:function(){return this.props.todos.filter((function(e){return!e.deleted}))}}]),n}(a.Component),K=Object(N.b)((function(e,t){return Object(h.a)({todos:e.todos},t)}))(P),L=n(251),W=n(27),J=(n(216),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={countDown:a.props.timer},a}return Object(i.a)(n,[{key:"componentDidMount",value:function(){var e=this;k=setInterval((function(){var t=e.state.countDown;e.setState({countDown:t-1e3}),t<1e3&&(e.props.onFinish(),clearInterval(k))}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(k)}},{key:"render",value:function(){var e=1-this.state.countDown/this.props.duration;return a.createElement("div",{className:"CountDown",id:"CountDown"},a.createElement("span",{className:"restTime"},this.countDown),a.createElement("div",{className:"progress",style:{width:"".concat(100*e,"%")}}))}},{key:"countDown",get:function(){var e=Math.floor(this.state.countDown/6e4),t=Math.floor(this.state.countDown/1e3%60);return"".concat(e<10?"0"+e:e,":").concat(t<10?"0"+t:t)}}]),n}(a.Component)),R=(n(217),L.a.confirm),q=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).updateTomato=function(){var e=Object(b.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.put("tomatoes/".concat(a.props.unfinishedTomato.id),t);case 3:n=e.sent,a.props.updateTomato(n.data.resource),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),a.onKeyUp=function(e){13===e.keyCode&&""!==a.state.description&&(a.updateTomato({description:a.state.description,ended_at:new Date}),a.setState({description:""}))},a.onFinish=function(){a.forceUpdate()},a.abortTomato=function(){a.updateTomato({aborted:!0})},a.showConfirm=function(){R({title:"\u60a8\u76ee\u524d\u6b63\u5728\u4e00\u4e2a\u756a\u8304\u5de5\u4f5c\u65f6\u95f4\u4e2d\uff0c\u8981\u653e\u5f03\u8fd9\u4e2a\u756a\u8304\u5417\uff1f",onCancel:function(){},onOk:function(){a.abortTomato()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88"})},a.state={description:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.startTomato,r=t.unfinishedTomato,o=a.createElement("div",null);if(void 0===r)o=a.createElement(W.a,{className:"startTomatoButton",onClick:function(){n()}},"\u5f00\u59cb\u756a\u8304");else{var c=Date.parse(r.started_at),s=r.duration,i=(new Date).getTime();if(i-c>s)o=a.createElement("div",{className:"inputWrapper"},a.createElement(D.a,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})},onKeyUp:function(t){return e.onKeyUp(t)},placeholder:"\u8bf7\u8f93\u5165\u4f60\u521a\u521a\u5b8c\u6210\u7684\u4efb\u52a1"}),a.createElement(T.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}));else if(i-c<s){var u=s-i+c;o=a.createElement("div",{className:"countDownWrapper"},a.createElement(J,{timer:u,onFinish:this.onFinish,duration:s}),a.createElement(T.a,{type:"close-circle",className:"abort",onClick:this.showConfirm}))}}return a.createElement("div",{className:"TomatoAction",id:"TomatoAction"},o)}}]),n}(a.Component),G=(n(220),function(e){return{type:"UPDATE_TOMATO",payload:e}});n(221);function X(e){return a.createElement("div",{className:"TomatoItem"},a.createElement("span",{className:"timeRange"},Object(B.a)(new Date(e.started_at),"HH:mm")," - ",Object(B.a)(new Date(e.ended_at),"HH:mm")),a.createElement("span",{className:"description"},e.description))}var Y=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.dateSort.map((function(t){var n=e.props.finishedTomato[t];return a.createElement("div",{key:t,className:"dailyTomato"},a.createElement("div",{className:"title"},a.createElement("span",{className:"dateTime"},Object(B.a)(new Date(t),"M\u6708d\u65e5")),a.createElement("span",{className:"finishedCount"},"\u5b8c\u6210\u4e86",n.length,"\u4e2a\u756a\u8304")),n.map((function(e){return a.createElement(X,Object.assign({key:e.id},e))})))}));return a.createElement("div",{className:"TomatoList",id:"TomatoList"},t)}},{key:"dateSort",get:function(){return Object.keys(this.props.finishedTomato).sort((function(e,t){return Date.parse(t)-Date.parse(e)})).splice(0,3)}}]),n}(a.Component),$=n(32),Q=n.n($),V=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).startTomato=Object(b.a)(v.a.mark((function t(){var n;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.post("tomatoes",{duration:15e5});case 3:n=t.sent,e.props.addTomato(n.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e}return Object(i.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Tomatoes",id:"Tomatoes"},a.createElement(q,{startTomato:this.startTomato,unfinishedTomato:this.unFinishedTomato,updateTomato:this.props.updateTomato}),"{}"===JSON.stringify(this.finishedTomato)?a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}):null,a.createElement(Y,{finishedTomato:this.finishedTomato}))}},{key:"unFinishedTomato",get:function(){return this.props.tomatoes.filter((function(e){return!e.description&&!e.ended_at&&!e.aborted}))[0]}},{key:"finishedTomato",get:function(){var e=this.props.tomatoes.filter((function(e){return e.description&&e.ended_at&&!e.aborted}));return Q.a.groupBy(e,(function(e){return Object(B.a)(new Date(e.started_at),"yyyy-MM-dd")}))}}]),n}(a.Component),Z={addTomato:function(e){return{type:"ADD_TOMATO",payload:e}},updateTomato:G},ee=Object(N.b)((function(e,t){return Object(h.a)({tomatoes:e.tomatoes},t)}),Z)(V),te=(n(222),n(45)),ne=(n(223),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return a.createElement("div",{className:"Polygon",id:"Polygon"},a.createElement("svg",null,a.createElement("polygon",{fill:"rgba(215,78,78,.1)",stroke:"rgba(215,78,78,.5)",strokeWidth:"1",points:this.points})))}},{key:"points",get:function(){var e=this,t=Object.keys(this.props.data).sort((function(e,t){return Date.parse(e)-Date.parse(t)})),n=t[0];if(n){var a,r=(new Date).getTime()-Date.parse(n),o=0,c=t.map((function(t){var c=(Date.parse(t)-Date.parse(n))/r*500,s=100*(1-(o+=e.props.data[t].length)/e.props.finished.length);return a=s,"".concat(c,",").concat(s)}));return["0,100"].concat(Object(te.a)(c),["500,".concat(a),"500,100"]).join(" ")}return"0,100 500,100"}}]),n}(a.Component)),ae=Object(N.b)((function(e,t){return Object(h.a)({},t)}))(ne),re=n(249),oe=(n(224),n(225),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).updateTodo=function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.put("todos/".concat(e.props.id),n);case 3:a=t.sent,e.props.updateTodo(a.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this,n="",r="";return"finished"===this.props.itemType?(n="HH:mm",r=this.props.completed_at,e=a.createElement("div",{className:"action"},a.createElement(T.a,{type:"rollback",onClick:function(){return t.updateTodo({completed:!1})}}),a.createElement(T.a,{type:"delete",theme:"filled",onClick:function(){return t.updateTodo({deleted:!0})}}))):"deleted"===this.props.itemType&&(n="yyyy-MM-dd  HH:mm",r=this.props.updated_at,e=a.createElement("div",{className:"action"},a.createElement(T.a,{type:"rollback",onClick:function(){return t.updateTodo({deleted:!1})}}))),a.createElement("div",{className:"TodoHistoryTodoItem"},a.createElement("div",{className:"text"},a.createElement("span",null,Object(B.a)(new Date(r),n)),a.createElement("span",null,this.props.description)),e)}}]),n}(a.Component)),ce={updateTodo:C},se=Object(N.b)((function(e,t){return Object(h.a)({todos:e.todos},t)}),ce)(oe),ie=re.a.TabPane,ue=["\u5468\u5929","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],le=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.finishedDates.map((function(t){return a.createElement("div",{key:t,className:"dailyTodos"},a.createElement("div",{className:"summary"},a.createElement("div",{className:"date"},a.createElement("span",null,Object(B.a)(new Date(t),"MM\u6708dd\u65e5")),a.createElement("span",null,ue[new Date(t).getDay()])),a.createElement("div",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTodos[t].length,"\u4e2a\u4efb\u52a1")),a.createElement("div",{className:"todoList"},e.dailyFinishedTodos[t].map((function(e){return a.createElement(se,Object.assign({key:e.id},e,{itemType:"finished"}))}))))})),n=this.deletedDates.map((function(t){return a.createElement("div",{className:"todoList"},e.dailydeletedTodos[t].map((function(e){return a.createElement(se,Object.assign({key:e.id},e,{itemType:"deleted"}))})))}));return a.createElement(re.a,{defaultActiveKey:"1"},a.createElement(ie,{tab:"\u5df2\u5b8c\u6210\u7684\u4efb\u52a1",key:"1"},a.createElement("div",{className:"TodoHistory"},t.length>0?t:a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}))),a.createElement(ie,{tab:"\u5df2\u5220\u9664\u7684\u4efb\u52a1",key:"2"},a.createElement("div",{className:"TodoHistory"},n.length>0?n:a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}))))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"deletedTodos",get:function(){return this.props.todos.filter((function(e){return e.deleted}))}},{key:"dailyFinishedTodos",get:function(){return Q.a.groupBy(this.finishedTodos,(function(e){return Object(B.a)(new Date(e.completed_at),"yyyy-MM-dd")}))}},{key:"dailydeletedTodos",get:function(){return Q.a.groupBy(this.deletedTodos,(function(e){return Object(B.a)(new Date(e.updated_at),"yyyy-MM-dd")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"deletedDates",get:function(){return Object.keys(this.dailydeletedTodos).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),de=Object(N.b)((function(e,t){return Object(h.a)({todos:e.todos},t)}))(le),pe=(n(234),n(235),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).updateTomato=function(){var t=Object(b.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.put("tomatoes/".concat(e.props.id),n);case 3:a=t.sent,e.props.updateTomato(a.data.resource),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),new Error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this,n="",r="",o="";return"finished"===this.props.itemType?(n="HH:mm",r=this.props.started_at,o=this.props.ended_at,e=a.createElement("div",{className:"action"},a.createElement(T.a,{type:"delete",theme:"filled",onClick:function(){return t.updateTomato({aborted:!0})}}))):"aborted"===this.props.itemType&&(n="yyyy-MM-dd  HH:mm",r=this.props.started_at,o=this.props.updated_at,e=a.createElement("div",{className:"action"})),a.createElement("div",{className:"TomatoHistoryTomatoItem"},a.createElement("div",{className:"text"},a.createElement("span",null,"".concat(Object(B.a)(new Date(r),n),"-").concat(Object(B.a)(new Date(o),"HH:mm"))),a.createElement("span",null,this.props.description?this.props.description:"\u672a\u6dfb\u52a0\u756a\u8304\u63cf\u8ff0")),e)}}]),n}(a.Component)),me={updateTomato:G},fe=Object(N.b)((function(e,t){return Object(h.a)({todos:e.todos},t)}),me)(pe),he=re.a.TabPane,ye=["\u5468\u5929","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"],ve=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.finishedDates.map((function(t){var n=0;e.dailyFinishedTomatoes[t].forEach((function(e){n=Date.parse(e.ended_at)-Date.parse(e.started_at)+n}));var r=n%36e5%6e4,o=Math.floor(n/36e5),c=Math.floor(0!==r?(n+6e4)%36e5/6e4:n%36e5/6e4),s="";return o&&c?s="".concat(o,"\u5c0f\u65f6").concat(c,"\u5206\u949f"):o?s="".concat(o,"\u5c0f\u65f6"):c&&(s="".concat(c,"\u5206\u949f")),a.createElement("div",{key:t,className:"dailyTomatoes"},a.createElement("div",{className:"summary"},a.createElement("div",{className:"date"},a.createElement("span",null,Object(B.a)(new Date(t),"MM\u6708dd\u65e5")),a.createElement("span",null,ye[new Date(t).getDay()])),a.createElement("div",{className:"finishedCount"},"\u5b8c\u6210\u4e86",e.dailyFinishedTomatoes[t].length,"\u4e2a\u756a\u8304"),a.createElement("div",{className:"countNum"},"\u603b\u8ba1",s)),a.createElement("div",{className:"tomatoList"},e.dailyFinishedTomatoes[t].map((function(e){return a.createElement(fe,Object.assign({key:e.id},e,{itemType:"finished"}))}))))})),n=this.abortedDates.map((function(t){return a.createElement("div",{className:"tomatoList"},e.dailyAbortedTomatoes[t].map((function(e){return a.createElement(fe,Object.assign({key:e.id},e,{itemType:"aborted"}))})))}));return a.createElement(re.a,{defaultActiveKey:"1"},a.createElement(he,{tab:"\u5df2\u5b8c\u6210\u7684\u756a\u8304",key:"1"},a.createElement("div",{className:"TomatoHistory"},t.length>0?t:a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}))),a.createElement(he,{tab:"\u6253\u65ad\u7684\u756a\u8304",key:"2"},a.createElement("div",{className:"TomatoHistory"},n.length>0?n:a.createElement(z.a,{description:"\u6682\u65e0\u6570\u636e"}))))}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.ended_at&&!e.aborted}))}},{key:"abortedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.aborted}))}},{key:"dailyFinishedTomatoes",get:function(){return Q.a.groupBy(this.finishedTomatoes,(function(e){return Object(B.a)(new Date(e.ended_at),"yyyy-MM-dd")}))}},{key:"dailyAbortedTomatoes",get:function(){return Q.a.groupBy(this.abortedTomatoes,(function(e){return Object(B.a)(new Date(e.updated_at),"yyyy-MM-dd")}))}},{key:"finishedDates",get:function(){return Object.keys(this.dailyFinishedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}},{key:"abortedDates",get:function(){return Object.keys(this.dailyAbortedTomatoes).sort((function(e,t){return Date.parse(t)-Date.parse(e)}))}}]),n}(a.Component),be=Object(N.b)((function(e,t){return Object(h.a)({tomatoes:e.tomatoes},t)}))(ve),Ee=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).state={type:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e,t=this;return e="tomato"===this.state.type?a.createElement(be,null):"todo"===this.state.type?a.createElement(de,null):a.createElement("span",null),a.createElement("div",{className:"Statistics",id:"Statistics"},a.createElement("ul",null,a.createElement("li",{onClick:function(){return t.setState({type:"tomato"})}},a.createElement("div",{className:"textHistory"},a.createElement("div",{className:"title"},"\u756a\u8304\u5386\u53f2"),a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u756a\u8304"),a.createElement("div",{className:"num"},this.finishedTomatoes.length)),a.createElement(ae,{data:this.dailyTomatoes,finished:this.finishedTomatoes})),a.createElement("li",{onClick:function(){return t.setState({type:"todo"})}},a.createElement("div",{className:"textHistory"},a.createElement("div",{className:"title"},"\u4efb\u52a1\u5386\u53f2"),a.createElement("p",null,"\u7d2f\u8ba1\u5b8c\u6210\u4efb\u52a1"),a.createElement("div",{className:"num"},this.finishedTodos.length)),a.createElement(ae,{data:this.dailyTodos,finished:this.finishedTodos}))),e)}},{key:"finishedTomatoes",get:function(){return this.props.tomatoes.filter((function(e){return e.ended_at&&!e.aborted}))}},{key:"dailyTomatoes",get:function(){return Q.a.groupBy(this.finishedTomatoes,(function(e){return Object(B.a)(new Date(e.ended_at),"yyyy-MM-dd")}))}},{key:"finishedTodos",get:function(){return this.props.todos.filter((function(e){return e.completed&&!e.deleted}))}},{key:"dailyTodos",get:function(){return Q.a.groupBy(this.finishedTodos,(function(e){return Object(B.a)(new Date(e.completed_at),"yyyy-MM-dd")}))}}]),n}(a.Component),Te=Object(N.b)((function(e,t){return Object(h.a)({todos:e.todos,tomatoes:e.tomatoes},t)}))(Ee),Oe=a.createElement(E.a,null,a.createElement(E.a.Item,{key:"1",onClick:function(){localStorage.setItem("x-token",""),f.push("/login")}},a.createElement(T.a,{type:"user"}),"\u6ce8\u9500")),ge=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).getTodos=Object(b.a)(v.a.mark((function e(){var t,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("todos");case 3:t=e.sent,n=t.data.resources.map((function(e){return Object.assign({},e,{editing:!1})})),a.props.initTodo(n),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),new Error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])}))),a.getTomatoes=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.get("tomatoes");case 3:t=e.sent,a.props.initTomato(t.data.resources),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),a.getMe=Object(b.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.get("me");case 2:t=e.sent,a.setState({user:t.data.account});case 4:case"end":return e.stop()}}),e)}))),a.state={user:""},a}return Object(i.a)(n,[{key:"componentWillMount",value:function(){var e=Object(b.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMe();case 2:return e.next=4,this.getTodos();case 4:return e.next=6,this.getTomatoes();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return a.createElement("div",{className:"Home",id:"Home"},a.createElement("header",null,a.createElement("span",{className:"logo"},a.createElement("svg",{className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4020",width:"32",height:"32"},a.createElement("path",{d:"M955.733 540.017c0 245.067-198.662 391.53-443.733 391.53S68.267 785.083 68.267 540.016c0-245.064 197.898-380.256 443.733-320.615 252.931-71.461 443.733 75.551 443.733 320.615z",fill:"#FF3000","p-id":"4021"}),a.createElement("path",{d:"M512 952.026c-127.16 0-243.261-38.584-326.915-108.643C95.263 768.16 47.787 663.258 47.787 540.017c0-105.271 34.597-194.919 100.055-259.25 62.897-61.815 152.197-95.86 251.45-95.86 36.42 0 74.182 4.489 112.315 13.35 42.534-11.572 84.399-17.432 124.512-17.432 98.68 0 183.545 34.444 245.426 99.608 61.931 65.218 94.668 154.982 94.668 259.584 0 123.241-47.476 228.143-137.298 303.366C755.261 913.443 639.16 952.026 512 952.026zM399.288 225.867c-185.743 0-310.541 126.25-310.541 314.15 0 218.47 174.049 371.05 423.253 371.05 249.207 0 423.253-152.58 423.253-371.05 0-190.345-120.214-318.232-299.137-318.232-37.974 0-77.862 5.83-118.549 17.326a20.509 20.509 0 0 1-10.393 0.194c-36.752-8.915-73.05-13.438-107.886-13.438z",fill:"#FF601A","p-id":"4022"}),a.createElement("path",{d:"M371.053 831.962a20.466 20.466 0 0 1-6.332-1.01c-56.62-18.401-106.557-50.93-144.41-94.071-40.428-46.07-63.81-101.062-67.622-159.038a20.48 20.48 0 0 1 19.094-21.78c11.243-0.73 21.036 7.806 21.78 19.094 6.312 96.017 80.183 183.156 183.822 216.839a20.48 20.48 0 0 1-6.332 39.966zM140.995 475.32a31.324 31.324 0 1 0 62.648 0 31.324 31.324 0 1 0-62.648 0z",fill:"#FFFFFF","p-id":"4023"}),a.createElement("path",{d:"M450.953 292.43c-54.402 0-94.649-15.656-119.614-47.718-40.765-52.337-22.77-125.76-21.982-128.877 2.41-9.544 10.998-15.916 20.61-15.916 0.915 0 1.843 0.136 2.772 0.252a21.316 21.316 0 0 1 18.52 21.398c-1.42 116.45 110.026 128.82 114.774 129.287a21.286 21.286 0 0 1 19.176 21.716c-0.28 11.14-9.11 19.575-20.248 20.111-4.745 0.225-9.452-0.26-13.978-0.26-0.01 0.008-0.017 0.008-0.03 0.008z",fill:"#5DA500","p-id":"4024"}),a.createElement("path",{d:"M329.98 121.35c-1.672 137.306 133.953 150.7 133.953 150.7a269.995 269.995 0 0 1-12.98 0.317c-159.096 0-120.972-151.016-120.972-151.016m-0.035-42.554a42.35 42.35 0 0 0-27.033 9.728 42.452 42.452 0 0 0-9.83 11.636 42.394 42.394 0 0 0-4.646 11.98c-3.15 13.241-18.514 88.956 26.129 146.262 29.211 37.499 75.097 56.511 136.397 56.511 4.884 0 9.94-0.123 15.022-0.369 22.384-1.078 40.4-19.298 40.803-41.704 0.403-22.35-16.258-41.164-38.506-43.124-2.14-0.273-27.84-3.806-51.907-19.18-29.798-19.029-44.148-47.786-43.85-87.882 0.01-0.434 0.016-0.874 0.016-1.308 0-22.831-17.974-41.458-40.55-42.502a40.96 40.96 0 0 0-2.045-0.048z",fill:"#167203","p-id":"4025"}),a.createElement("path",{d:"M606.566 318.211c-53.009 0-97.351-34.488-99.212-35.956a21.272 21.272 0 0 1 22.092-36.02c19.872 9.174 39.253 13.823 57.606 13.823 68.247 0 106.906-65.27 107.288-65.928a21.333 21.333 0 0 1 18.456-10.626c3.1 0 6.24 0.676 9.203 2.106a21.248 21.248 0 0 1 10.594 26.873c-34.123 87.392-87.37 105.728-126.027 105.728z",fill:"#5DA500","p-id":"4026"}),a.createElement("path",{d:"M712.776 204.749c-28.174 72.14-69.253 92.187-106.21 92.187-46.243 0-86.043-31.382-86.043-31.382 24.392 11.257 46.582 15.787 66.526 15.787 81.992 0 125.727-76.592 125.727-76.592m-0.014-42.875c-14.776 0-28.969 7.704-36.704 21.367-0.081 0.14-0.167 0.273-0.242 0.417-2.556 4.137-35.188 55.135-88.767 55.135-15.25 0-31.635-3.993-48.688-11.868a42.54 42.54 0 0 0-54.101 16.388 42.55 42.55 0 0 0 9.926 55.654c5.26 4.147 53.098 40.523 112.384 40.523 30.375 0 58.026-9.335 82.19-27.743 26.101-19.897 47.353-50.265 63.17-90.287a42.458 42.458 0 0 0 2.976-10.615c2.677-18.227-6.615-36.775-23.917-44.882a42.78 42.78 0 0 0-18.227-4.09z",fill:"#167203","p-id":"4027"}),a.createElement("path",{d:"M498.794 282.064c-3.028 0-4.752-0.123-4.752-0.123-10.202-0.706-18.53-8.574-19.729-18.732s4.93-19.736 14.685-22.798c79.752-25.047 60.651-103.267 58.207-112.1-3.028-10.957 3.082-22.399 13.892-25.931a21.224 21.224 0 0 1 26.488 12.65c20.47 54.084 20.347 96.716-0.369 126.713-25.839 37.413-74.206 40.321-88.422 40.321z",fill:"#5DA500","p-id":"4028"}),a.createElement("path",{d:"M567.689 122.566c49.862 131.734-48.93 138.223-68.895 138.223-2.185 0-3.424-0.075-3.424-0.075 102.523-32.198 72.319-138.148 72.319-138.148m-0.311-42.871c-4.489 0-9.045 0.723-13.513 2.245-21.661 7.384-33.7 30.215-27.147 52.112 0.485 1.942 4.909 20.623 0.942 40.332-4.621 22.999-18.927 37.536-45.035 45.732a42.55 42.55 0 0 0 10.09 83.06c0.771 0.05 2.911 0.16 6.079 0.16 16.828 0 74.199-3.57 105.93-49.5 24.923-36.09 25.848-85.323 2.754-146.336-6.448-17.04-22.774-27.805-40.1-27.805z",fill:"#167203","p-id":"4029"}),a.createElement("path",{d:"M413.522 344.972c-65.382 0-89.392-70.615-90.382-73.619a21.272 21.272 0 0 1 36.683-20.115c18.562 22.73 39.445 33.775 63.833 33.775 33.3 0 61.529-21.108 61.802-21.323a21.217 21.217 0 0 1 13.005-4.44 21.279 21.279 0 0 1 14.397 36.949c-35.273 32.365-68.693 48.773-99.338 48.773z",fill:"#5DA500","p-id":"4030"}),a.createElement("path",{d:"M343.347 264.7c25.952 31.775 54.685 41.592 80.31 41.592 41.495 0 74.816-25.767 74.816-25.767-34.898 32.02-62.884 43.175-84.951 43.175-50.743 0-70.175-59-70.175-59m-0.02-42.55a42.554 42.554 0 0 0-40.394 55.86c10.793 32.77 46.234 88.237 110.589 88.237 36.017 0 74.14-18.172 113.32-54.006a43.104 43.104 0 0 0 3.744-3.788c13.742-15.746 14.363-39.663 0.474-55.853a42.581 42.581 0 0 0-32.365-14.984c-9.155 0-18.35 2.983-26.099 9.134-1.949 1.406-24.128 16.991-48.933 16.991-11.23 0-28.355-2.693-47.357-25.958a42.54 42.54 0 0 0-32.98-15.633z",fill:"#167203","p-id":"4031"}),a.createElement("path",{d:"M505.795 318.44c-30.263 0-53.088-17.067-53.088-39.694 0-22.63 22.825-39.697 53.088-39.697 30.269 0 53.094 17.067 53.094 39.697 0 22.63-22.825 39.694-53.094 39.694z",fill:"#5DA500","p-id":"4032"}),a.createElement("path",{d:"M505.795 260.328c17.568 0 31.822 8.25 31.822 18.422s-14.254 18.418-31.822 18.418-31.813-8.246-31.813-18.418c0-10.175 14.244-18.422 31.813-18.422m0-42.55c-42.394 0-74.363 26.21-74.363 60.968s31.969 60.966 74.363 60.966c42.393 0 74.373-26.211 74.373-60.966 0-34.758-31.976-60.969-74.373-60.969z",fill:"#167203","p-id":"4033"}),a.createElement("path",{d:"M565.111 450.993s52.081-72.58-3.54-135.253c-10.884-12.264-31.385-1.287-61.432 16.401 0 0 17.254 3.946 31.361 32.092 14.108 28.147 33.611 86.76 33.611 86.76z",fill:"#5DA500","p-id":"4034"}),a.createElement("path",{d:"M565.115 471.473a20.483 20.483 0 0 1-19.436-14.015c-0.19-0.573-19.206-57.555-32.484-84.05-7.916-15.793-16.057-20.398-18.17-21.374-8.454-1.191-14.25-7.393-16.042-15.827-1.833-8.616 3.178-17.248 10.769-21.716 25.081-14.766 42.786-24.443 59.692-24.443 10.93 0 20.422 4.181 27.447 12.093 52.586 59.256 26.177 131.086 4.864 160.789a20.483 20.483 0 0 1-16.64 8.543z m-27.959-136.325c4.315 5.335 8.63 11.882 12.653 19.91 5.148 10.271 10.882 24.122 16.187 37.858 2.413-18.801-0.642-40.95-18.15-61.734-2.668 0.481-6.45 1.97-10.69 3.966z",fill:"#167203","p-id":"4035"})),a.createElement("span",null,"\u756a\u8304\u571f\u8c46")),a.createElement(O.a,{overlay:Oe},a.createElement("span",null,this.state.user,a.createElement(T.a,{type:"down",style:{marginLeft:"8px"}})))),a.createElement("main",null,a.createElement(ee,null),a.createElement(K,null)),a.createElement(Te,null))}}]),n}(a.Component),je={initTomato:function(e){return{type:"INIT_TOMATO",payload:e}},initTodo:function(e){return{type:"INIT_TODO",payload:e}}},ke=Object(N.b)((function(e,t){return Object(h.a)({},t)}),je)(ge),we=n(254),De=n(66),Ne=(n(243),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onChange=function(e,t){var n={};n[e]=t,a.setState(n)},a.submit=Object(b.a)(v.a.mark((function e(){var t,n,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.account,r=t.password,""!==n){e.next=5;break}return we.a.destroy(),we.a.warning("\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 5:if(""!==r){e.next=9;break}return we.a.destroy(),we.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 9:return e.prev=9,e.next=12,w.post("sign_in/user",{account:n,password:r});case 12:a.props.history.push("/"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(9),we.a.destroy(),we.a.warning(e.t0.response.data.errors);case 19:case"end":return e.stop()}}),e,null,[[9,15]])}))),a.state={account:"",password:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,r=t.password;return a.createElement("div",{className:"Login",id:"Login"},a.createElement("h1",null,"\u767b\u5f55"),a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",prefix:a.createElement(T.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){return e.onChange("account",t.target.value)}}),a.createElement(D.a.Password,{value:r,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),a.createElement(W.a,{type:"primary",className:"loginButton",onClick:this.submit},"\u767b\u5f55"),a.createElement("p",null,"\u5982\u679c\u4f60\u6ca1\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",a.createElement(De.a,{to:"/signUp"},"\u6ce8\u518c")))}}]),n}(a.Component)),Ce=(n(245),{"has already been taken":"\u5df2\u6709\u6b64\u767b\u5f55\u540d","doesn't match Password":"\u786e\u8ba4\u5bc6\u7801\u4e0d\u6b63\u786e"}),xe=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).onChange=function(e,t){var n={};n[e]=t,a.setState(n)},a.submit=Object(b.a)(v.a.mark((function e(){var t,n,r,o,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.state,n=t.account,r=t.password,o=t.passwordConfirmation,""!==n){e.next=5;break}return we.a.destroy(),we.a.warning("\u8d26\u53f7\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 5:if(""!==r){e.next=9;break}return we.a.destroy(),we.a.warning("\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 9:if(""!==o){e.next=13;break}return we.a.destroy(),we.a.warning("\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u4e3a\u7a7a"),e.abrupt("return");case 13:return e.prev=13,e.next=16,w.post("sign_up/user",{account:n,password:r,password_confirmation:o});case 16:a.props.history.push("/"),e.next=24;break;case 19:e.prev=19,e.t0=e.catch(13),Object.keys(e.t0.response.data.errors).forEach((function(t){c=Ce[e.t0.response.data.errors[t][0]]})),we.a.destroy(),we.a.warning(c);case 24:case"end":return e.stop()}}),e,null,[[13,19]])}))),a.state={account:"",password:"",passwordConfirmation:""},a}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.account,r=t.password,o=t.passwordConfirmation;return a.createElement("div",{className:"SignUp",id:"SignUp"},a.createElement("h1",null,"\u6ce8\u518c"),a.createElement(D.a,{placeholder:"\u8bf7\u8f93\u5165\u4f60\u7684\u7528\u6237\u540d",prefix:a.createElement(T.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),value:n,onChange:function(t){return e.onChange("account",t.target.value)}}),a.createElement(D.a.Password,{value:r,placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",onChange:function(t){return e.onChange("password",t.target.value)}}),a.createElement(D.a.Password,{value:o,placeholder:"\u8bf7\u786e\u8ba4\u5bc6\u7801",onChange:function(t){return e.onChange("passwordConfirmation",t.target.value)}}),a.createElement(W.a,{type:"primary",className:"signUpButton",onClick:this.submit},"\u6ce8\u518c"),a.createElement("p",null,"\u5982\u679c\u4f60\u6709\u8d26\u53f7\uff0c\u8bf7\u7acb\u5373",a.createElement(De.a,{to:"/login"},"\u767b\u5f55")))}}]),n}(a.Component),Me=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){return r.a.createElement(d.b,{history:f},r.a.createElement(d.a,{exact:!0,path:"/",component:ke}),r.a.createElement(d.a,{exact:!0,path:"/login",component:Ne}),r.a.createElement(d.a,{exact:!0,path:"/signUp",component:xe}))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var _e=n(58),Ae=Object(_e.b)({todos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TODO":return[t.payload].concat(Object(te.a)(e));case"INIT_TODO":return Object(te.a)(t.payload);case"UPDATE_TODO":return e.map((function(e){return t.payload.id===e.id?t.payload:e}));case"EDIT_TODO":return e.map((function(e){return e.id===t.payload?Object.assign({},e,{editing:!0}):Object.assign({},e,{editing:!1})}));default:return e}},tomatoes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOMATO":return[t.payload].concat(Object(te.a)(e));case"INIT_TOMATO":return Object(te.a)(t.payload);case"UPDATE_TOMATO":return e.map((function(e){return t.payload.id===e.id?t.payload:e}));default:return e}}}),Fe=Object(_e.c)(Ae);c.a.render(r.a.createElement(N.a,{store:Fe},r.a.createElement(Me,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[142,1,2]]]);
//# sourceMappingURL=main.47b01f5b.chunk.js.map